const hip = require('./hip-requests.js');
const d = new Date();
const account = process.argv[2];
const now = Math.round(d.getTime() / 1000);
/* eslint max-len: ["error", 150]*/
hip.uploadAttachments((result) => {
  hip.postJobOptions(hip.randomCategory(), '7467 - Queenstown', 3, '04000000', `hiptest+${now}@mailinator.com`, 'API Test', true, false, result, (res) => {
    hip.postJob(res, (jobId) => {
      console.log('Job Created.');
      hip.setCookie(() => {
        hip.createAssignments(hip.cookie, jobId, account, () => {
          hip.invite(hip.cookie, jobId, false, () => {
            console.log(`${hip.appUrl}?m=jobs&a=view_assignments&job_id=${jobId}`);
          });
        });
      });
    });
  });
});
