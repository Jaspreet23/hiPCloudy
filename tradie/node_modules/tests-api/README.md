## Setup
To run the tests locally you need to also have the [On-Demand Service](https://github.com/hipagesgroup/on-demand-service) running.

* To run on production `export NODE_ENV=production`
* To run on dev `export NODE_ENV=dev`

Note: While on production environment, YARN doesn't install dev dependencies, please perform your `yarn install` before switching to production

## A simple API utility created using NodeJS request.js module. 


The scripts here use API/AJAX calls to:
* post a job
* create a new job assignment, &
* schedule an invite.

### To execute for a single job:

* `git clone https://github.com/hipagesgroup/tests-api.git`
* `cd <your local path>/tests-api`
* `yarn`
* `node createAndInvite.js <serviceId>`

### To add multiple invites:

* `node multiInvite.js <serviceId> <serviceId> <serviceId> <serviceId> ......`

### To setup data for tradie sanity cycle:

* Add `test-api` as a npm module bu adding it to your package.json
* `beforeAll => node sanitySetup.js <primaryAccount> <waitlistAccount1> <waitlistAccount2> <waitlistAccount3>`
* Fetch job details from updated JSON `sanitydata.json`
* DO NOT FORGET after sanity execution `afterAll => node sanityTeardown.js` 


### Working with yarn

#### Adding dependencies 

* `yarn add <package...>`

When you want to use another package, you first need to add it to your dependencies. This means running `yarn add [package-name]` to install it into your project.

* `yarn add <package...> --dev`

Using --dev or -D will install one or more packages in your devDependencies


*NOTE:* Please use the sanityData.json to read only and do not edit it in any way. If its nececssary to update, please create a local copy and edit that. 

Cheers!
